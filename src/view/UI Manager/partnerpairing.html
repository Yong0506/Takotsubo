<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Partner Pairing</title>
    <style>
        body {
            margin: 0;
            font-family: 'Poppins', sans-serif;
            background: url('../Asset Manager/images/partnerpairing/partner.png') no-repeat center center/cover;
            color: black;
        }

        .container {
            display: flex;
            justify-content: space-between;
            padding: 30px 50px;
        }

        .grid-scroll {
            height: 500px;
            overflow-y: auto;
            padding-right: 10px;
        }

        .grid-wrapper {
            padding-right: 10px;
            /* Prevent scrollbar overlay */
        }

        .grid-container {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            width: 800px;
            background-color: rgba(255, 255, 255, 0.8);
            border-radius: 15px;
            height: 520px;
            overflow-y: auto;
            overflow-x: hidden;
            padding-right: 10px;
            box-sizing: border-box;
     
        }

        .card {
            text-align: center;
        }

        .card img {
            width: 100px;
            height: 130px;
            border: 4px solid black;
            border-radius: 50%;
            background-color: #f8c1c1;
        }

        .card p {
            margin-top: 10px;
            font-weight: bold;
            color: black;
        }

        .profile-panel {
            width: 35%;
            background: linear-gradient(145deg, #ffffff, #e6e6e6);
            padding: 20px;
            border-radius: 15px;
            color: black;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2), 0 6px 20px rgba(0, 0, 0, 0.19);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
        }

        .profile-panel:hover {
            transform: scale(1.02);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3), 0 8px 24px rgba(0, 0, 0, 0.25);
        }


        .profile-panel h2 {
            margin-top: 0;
            font-size: 2em;
            font-weight: 700;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
            color: #3b215f;
            text-align: center;
        }

        .profile-panel .card {
            text-align: center;
            margin: 20px 0;
        }

        .profile-panel .card img {
            width: 120px;
            height: 150px;
            border: 4px solid #a278da;
            border-radius: 50%;
            background-color: #f8c1c1;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .profile-panel .traits,
        .profile-panel .contact,
        .profile-panel .notes {
            margin-top: 20px;
            font-size: 1em;
            line-height: 1.5;
            background: rgba(255, 255, 255, 0.9);
            padding: 10px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .profile-panel .traits strong,
        .profile-panel .contact strong,
        .profile-panel .notes strong {
            font-weight: bold;
            color: #3b215f;
        }


        .profile-panel .hearts {
            margin: 15px 0;
            font-size: 1.2em;
            text-align: center;
        }

        .profile-panel .hearts span {
            font-size: 28px;
            color: purple;
        }


        .back-btn {
            position: absolute;
            top: 20px;
            left: 20px;
            background-color: rgba(153, 102, 255, 0.2);
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            color: #6633cc;
            text-decoration: none;
            border: 2px solid #b399ff;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            background-color: rgba(153, 102, 255, 0.4);
            color: white;
            border-color: #9966ff;
            box-shadow: 0 0 8px #b399ff;
        }

        .title {
            text-align: center;
            font-size: 2.8em;
            font-weight: 800;
            margin-top: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.50);
            color: #3b215f;
        }

        .grid-container .card:nth-child(-n+4) {
            padding-top: 20px;
        }

        .card.selected {
            border: 3px solid #a278da;
            box-shadow: 0 0 8px rgba(162, 120, 218, 0.6);
            transform: scale(0.9);
        }
    </style>
</head>

<body>
    <a class="back-btn" href="#">‚Üê</a>
    <div class="title">PARTNER PAIRING</div>

    <div class="container">
        <div class="grid-wrapper">
                <div class="grid-container" id="card-container"></div>
        </div>

        <div class="profile-panel">
            <h2 id="profile-title">Rosaline</h2>
            <div class="card">
                <img src="../Asset Manager/images/partnerpairing/kate.jpg" id="profile-img">
                <p id="character-name">Rosaline</p>
            </div>

            <div class="hearts">
                Matching Level:
                <span>üíúüíúüíúü§çü§ç</span>
            </div>

            <div class="traits">
                <strong>Traits:</strong><br>
                Humorous, Kind, Independent
            </div>

            <div class="contact">
                <strong>Contact:</strong><br>
                Email: Rosaline123@gmail.com<br>
                Phone: 0101234567
            </div>

            <div class="notes">
                <strong>NOTES</strong><br>
                Has class on Tuesdays.
            </div>
        </div>
    </div>

    <select id="genderFilter">
        <option value="">-- Select Gender --</option>
        <option value="male">Male</option>
        <option value="female">Female</option>
      </select>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const cards = document.querySelectorAll(".grid-container .card");
            const characterNameHeading = document.getElementById("character-name");
            const profileTitle = document.getElementById("profile-title");
            const profileImg = document.getElementById("profile-img");

            cards.forEach(card => {
                card.addEventListener("click", () => {
                    cards.forEach(c => c.classList.remove("selected"));
                    card.classList.add("selected");

                    const name = card.querySelector("p").innerText;
                    const imgSrc = card.querySelector("img").src;

                    characterNameHeading.innerText = name;
                    profileTitle.innerText = name;
                    profileImg.src = imgSrc;
                });
            });
        });
    </script>

<script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-analytics.js";
    import { getFirestore, getDoc, updateDoc, doc } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-firestore.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries

    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
        apiKey: "AIzaSyAGSZM98qLSSIXfSor4_Mn_jqxPs__a_S0",
        authDomain: "takotsubo-4f61d.firebaseapp.com",
        projectId: "takotsubo-4f61d",
        storageBucket: "takotsubo-4f61d.firebasestorage.app",
        messagingSenderId: "59472372412",
        appId: "1:59472372412:web:a192e23b031683988266b9",
        measurementId: "G-QQ6VXX1M7C"
    };

    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const db = getFirestore(app);

    import { collection, getDocs } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-firestore.js";

const container = document.getElementById("card-container");
let allPartners = [];

async function loadPartners() {
    const querySnapshot = await getDocs(collection(db, "partners"));
    allPartners = [];

    querySnapshot.forEach(docSnap => {
        const data = docSnap.data();
        console.log("Fetched data:", data); // Ë∞ÉËØïËæìÂá∫
        allPartners.push({
            id: docSnap.id,
            name: data.name || "Unknown",
            gender: data.gender || "Unknown",
            imgUrl: data.imgUrl || "../Asset Manager/images/partnerpairing/kate.jpg",
            email: data.email || "N/A",
            phone: data.phone || "N/A"
        });
    });

    console.log("All partners:", allPartners); // Ë∞ÉËØïËæìÂá∫
    renderCards("all");
}

function renderCards(gender) {
    container.innerHTML = ""; // Ê∏ÖÁ©∫Âç°ÁâáÂÆπÂô®

    const filtered = gender === "all"
        ? allPartners
        : allPartners.filter(p => p.gender === gender);

    console.log("Filtered partners:", filtered); // Ë∞ÉËØïËæìÂá∫

    filtered.forEach(partner => {
        const card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `
            <img src="${partner.imgUrl}" alt="${partner.name}">
            <p>${partner.name}</p>
        `;
        container.appendChild(card);

        // Ê∑ªÂä†ÁÇπÂáª‰∫ã‰ª∂ÔºåÊòæÁ§∫ËØ¶ÁªÜ‰ø°ÊÅØ
        card.addEventListener("click", () => {
            document.querySelectorAll(".card").forEach(c => c.classList.remove("selected"));
            card.classList.add("selected");

            console.log("Selected partner:", partner); // Ë∞ÉËØïËæìÂá∫

            document.getElementById("profile-title").innerText = partner.name;
            document.getElementById("character-name").innerText = partner.name;
            document.getElementById("profile-img").src = partner.imgUrl;
            document.querySelector(".contact").innerHTML = `
                <strong>Contact:</strong><br>
                Email: ${partner.email}<br>
                Phone: ${partner.phone}
            `;
        });
    });
}

document.addEventListener("DOMContentLoaded", function () {
    loadPartners(); // Âä†ËΩΩÁé©ÂÆ∂Êï∞ÊçÆ
});

document.getElementById("genderFilter").addEventListener("change", (e) => {
    const selectedGender = e.target.value || "all";
    renderCards(selectedGender);
});


    </script>
</body>

</html>